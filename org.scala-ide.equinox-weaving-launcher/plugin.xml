<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
  <extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
    <launchConfigurationTypeImage
      icon="$nl$/icons/weaving_launcher.gif"
      configTypeID="org.scala-ide.ew.launcher.RuntimeWorkbench"
      id="org.scala-ide.ew.launcher.runtimeWorkbenchLaunchImage">
    </launchConfigurationTypeImage>
  </extension>

	<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
		<launchConfigurationTabGroup
			type="org.scala-ide.ew.launcher.RuntimeWorkbench"
			class="org.scalaide.ew.launcher.EquinoxWeavingLauncherTabGroup"
			id="org.scala-ide.ew.launcher.WorkbenchLauncherTabGroup">
			<launchMode
				description="Create a configuration to launch an Equinox Weaving enabled Eclipse application in debug mode."
				perspective="org.eclipse.debug.ui.DebugPerspective"
				mode="debug">
			</launchMode>
			<launchMode
				description="Create a configuration to launch an Equinox Weaving enabled Eclipse application."
				mode="run">
			</launchMode>
		</launchConfigurationTabGroup>
	</extension>

  <extension point="org.eclipse.debug.ui.launchShortcuts">
		<shortcut
      label="Equinox Weaving enabled Eclipse Application"
      icon="$nl$/icons/weaving_launcher.gif"
      modes="run, debug"
      class="org.eclipse.pde.ui.launcher.EclipseLaunchShortcut"
      id="org.scala-ide.ew.launcher.runtimeWorkbenchShortcut">
 			<contextualLaunch>
				<enablement>
					<with variable="selection">
						<count value="1"/>
						<iterate>
 							<and>
								<instanceof value="org.eclipse.core.runtime.IAdaptable"/>
								<test property="org.eclipse.debug.ui.projectNature" value="org.eclipse.pde.PluginNature"/>
								<or>
									<adapt type="org.eclipse.core.resources.IProject"/>
									<test property="org.eclipse.debug.ui.matchesPattern" value="plugin.xml"/>
									<test property="org.eclipse.debug.ui.matchesPattern" value="MANIFEST.MF"/>
									<test property="org.eclipse.debug.ui.matchesPattern" value="*.product"/>
								</or>
 							</and>
						</iterate>
 					</with>
 				</enablement>
 			</contextualLaunch>
 			<configurationType
 				id="org.scala-ide.ew.launcher.RuntimeWorkbench">
 			</configurationType>
 			<description
 				description="Runs a separate Equinox Weaving enabled Eclipse application"
 				mode="run">
 			</description>
 			<description
 				description="Debugs a separate Equinox Weaving enabled Eclipse application"
 				mode="debug">
 			</description>
		</shortcut>
	</extension>

 	<extension point="org.eclipse.debug.core.launchConfigurationTypes">
		<launchConfigurationType
      delegate="org.scalaide.ew.launcher.EquinoxWeavingApplicationLaunchConfiguration"
      delegateDescription="The Equinox Weaving enabled Eclipse Application launcher is used to run or debug a separate instance of an Equinox Weaving enabled Eclipse application"
      delegateName="Equinox Weaving enabled Eclipse Application Launcher"
      id="org.scala-ide.ew.launcher.RuntimeWorkbench"
      migrationDelegate="org.eclipse.pde.internal.ui.launcher.PDEMigrationDelegate"
      modes="run, debug"
      name="Eclipse Application with Equinox Weaving "
      sourceLocatorId="org.eclipse.pde.ui.launcher.PDESourceLookupDirector"
      sourcePathComputerId="org.eclipse.jdt.launching.sourceLookup.javaSourcePathComputer">
		</launchConfigurationType>
	</extension>

</plugin>
